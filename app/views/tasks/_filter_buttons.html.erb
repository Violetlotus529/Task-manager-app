<div class="modal-overlay">
  <div class="modal-content">
    <h2>Filter</h2>

<% base_params = params.permit(:search, :page, :sort, :filter, :status, :priority).to_h %>

  <div id="filter-model" class="modal">
    <div class="modal-content">
      <h3>Filter</h3>
      <div class="filter-grid">
        <%= link_to "全て", tasks_path({search: params[:search], page: params[:page], sort: params[:sort] }.compact), class: "btn #{'active' if params[:filter].blank?}" %>
        <%= link_to "今日", tasks_path({search: params[:search], status: params[:status], priority: params[:priority], filter: 'today' }.compact), class: "btn #{'active' if params[:filter] == 'today'}" %>
        <%= link_to "今週", tasks_path({search: params[:search], status: params[:status], priority: params[:priority], filter: 'this_week' }.compact), class: "btn #{'active' if params[:filter] == 'this_week'}" %>
        <%= link_to "期限切れ", tasks_path({search: params[:search], status: params[:status], priority: params[:priority], filter: 'overdue' }.compact), class: "btn btn-danger #{'active' if params[:filter] == 'overdue'}" %>
        <%= link_to "未着手", tasks_path({search: params[:search], priority: params[:priority], filter: params[:filter], status: 'not_started' }.compact), class: "btn btn-secondary #{'active' if params[:status] == 'not_started'}" %>
        <%= link_to "進行中", tasks_path({search: params[:search], priority: params[:priority], filter: params[:filter], status: 'in_progress'}.compact), class: "btn btn-warning #{'active' if params[:status] == 'in_progress'}" %>
        <%= link_to "完了", tasks_path({search: params[:search], priority: params[:priority], filter: params[:filter], status: 'completed'}.compact), class: "btn btn-success #{'active' if params[:status] == 'completed'}" %>
        <%= link_to "高", tasks_path({search: params[:search], status: params[:status], filter: params[:filter], page: params[:page], sort: params[:sort], priority: 'high'}.compact), class: "btn btn-danger #{'active' if params[:priority] == 'high'}" %>
        <%= link_to "中", tasks_path({search: params[:search], status: params[:status], filter: params[:filter], page: params[:page], sort: params[:sort], priority: 'medium'}.compact), class: "btn btn-warning #{'active' if params[:priority] == 'medium'}" %>
        <%= link_to "低", tasks_path({search: params[:search], status: params[:status], filter: params[:filter], page: params[:page], sort: params[:sort], priority: 'low'}.compact), class: "btn btn-secondary #{'active' if params[:priority] == 'low'}" %>
        <%= link_to "作成順", tasks_path({search: params[:search], status: params[:status], priority: params[:priority], filter: params[:filter], page: params[:page], sort: 'created_at' }.compact), class: "btn btn-secondary #{'active' if params[:sort].blank? || params[:sort] == 'created_at'}" %>
        <%= link_to "期限順", tasks_path({search: params[:search], status: params[:status], priority: params[:priority], filter: params[:filter], page: params[:page], sort: 'deadline' }.compact), class: "btn btn-warning #{'active' if params[:sort] == 'deadline'}" %>
        <%= link_to "優先度順", tasks_path({search: params[:search], status: params[:status], priority: params[:priority], filter: params[:filter], page: params[:page], sort: 'priority' }.compact), class: "btn btn-success #{'active' if params[:sort] == 'priority'}" %>
      </div>

      <div class="actions">
        <a href="#" class="clear-btn">クリア</a>
        <a href="#" class="apply-btn">適用</a>
      </div>

      <a href="#" class="close">×</a>
    </div>
  </div>