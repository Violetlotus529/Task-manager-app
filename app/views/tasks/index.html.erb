<div class="index-container">
  <h1>タスク一覧</h1>
  
  <div class="actions-bar">
    <%= link_to "新しいタスクを作成", "/tasks/new", class: "btn btn-primary" %>
  </div>

  <% if @tasks.any? %>
    <div class="tasks-list">
      <% @tasks.each do |task| %>
        <%
          today = Date.current
          is_overdue = task.deadline && task.deadline < today
          is_due_today = task.deadline && task.deadline == today
        %>
        <div class="task-index-item <%= 'overdue' if is_overdue %> <%= 'due-today' if is_due_today %>">
          <div class="task-title">
            <%= link_to task.title, "/tasks/#{task.id}" %>
          </div>
          <div class="task-content">
            <%= task.content %>
          </div>
          <% if task.deadline %>
            <div class="task-deadline">
              期限: <%= task.deadline.strftime('%Y年%m月%d日') %>
            </div>
          <% end %>
          <div class="task-actions">
            <%= link_to "表示", "/tasks/#{task.id}", class: "btn btn-outline" %>
            <%= link_to "編集", "/tasks/#{task.id}/edit", class: "btn btn-secondary" %>
            <%= button_to "削除", "/tasks/#{task.id}", method: :delete, 
                onclick: "return confirm('本当に削除しますか？')", class: "btn btn-danger" %>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="empty-state">
      <p>まだタスクがありません。</p>
      <%= link_to "最初のタスクを作成", "/tasks/new", class: "btn btn-primary" %>
    </div>
  <% end %>
</div>
