# Railså­¦ç¿’ãƒ¡ãƒ¢

## ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### asã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®å½¹å‰²
- `as: :task` ã§ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ˜ãƒ«ãƒ‘ãƒ¼ç”Ÿæˆ
- `task_path(id)` â†’ `/tasks/:id`
- `task_url(id)` â†’ å®Œå…¨URL

```ruby
# è‰¯ã„ä¾‹
resources :tasks  # å…¨RESTfulãƒ«ãƒ¼ãƒˆè‡ªå‹•ç”Ÿæˆ

# æ‚ªã„ä¾‹ï¼ˆé‡è¤‡ï¼‰
resources :tasks
get "tasks/:id" => "tasks#show", as: :task
```

### ä»Šæ—¥å­¦ã‚“ã ã“ã¨
- [ ] resourcesã®é‡è¤‡ãƒã‚§ãƒƒã‚¯
ï¼ˆresourcesã«ã‚ˆã£ã¦è¿½åŠ ã•ã‚Œã‚‹ãƒ«ãƒ¼ãƒˆï¼‰
GET /tasks â†’ tasks#index
GET /tasks/new â†’ tasks#new
POST /tasks â†’ tasks#create
GET /tasks/:id â†’ tasks#show ï¼ˆæ—¢ã«task_pathãƒ˜ãƒ«ãƒ‘ãƒ¼ä»˜ãï¼‰
GET /tasks/:id/edit â†’ tasks#edit
PATCH/PUT /tasks/:id â†’ tasks#update
DELETE /tasks/:id â†’ tasks#destroy

- [ ] ãƒ˜ãƒ«ãƒ‘ãƒ¼ãƒ¡ã‚½ãƒƒãƒ‰ã®ç¢ºèªæ–¹æ³•: `rails routes`

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚µãƒ¼ãƒãƒ¼æ¥ç¶šã‚¨ãƒ©ãƒ¼
```bash
# è§£æ±ºæ‰‹é †
lsof -ti:3000  # ãƒãƒ¼ãƒˆç¢ºèª
rails server   # ã‚µãƒ¼ãƒãƒ¼èµ·å‹•
```

---
**æ›´æ–°æ—¥**: 2025-01-24

é–“é•ã£ãŸURL: /1/edit ã§ã¯ãªã /tasks/1/edit

editã‚¢ã‚¯ã‚·ãƒ§ãƒ³æœªå®Ÿè£…: @task = Task.find(params[:id]) ãŒãªã‹ã£ãŸ

æ§‹æ–‡ã‚¨ãƒ©ãƒ¼: ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã«ã‚¿ã‚¤ãƒãŒè¤‡æ•°ã‚ã£ãŸ

## ã‚»ãƒ¼ãƒ•ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ¼”ç®—å­ (2025-09-28)

### å±é™ºãªæ›¸ãæ–¹vså®‰å…¨ãªæ›¸ãæ–¹
```erb
<!-- å±é™º: @taskæœªå®šç¾©ã§NameError -->
<% if @task && @task.errors.any? %>

<!-- å®‰å…¨: defined?ã§å­˜åœ¨ç¢ºèª + &.ã§nilã‚»ãƒ¼ãƒ• -->
<% if defined?(@task) && @task&.errors&.any? %>
```

**ãƒã‚¤ãƒ³ãƒˆ**: `defined?`ã¯å¤‰æ•°å­˜åœ¨ãƒã‚§ãƒƒã‚¯ã€`&.`ã¯nilã®å ´åˆã‚¹ã‚­ãƒƒãƒ—


ğŸš¨ ç™ºè¦‹ã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼ã¨ãã®åŸå› 
1. updateã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®å•é¡Œ
def update
  @task = Task.find_by(id: params[:id])
  @task.content = params[:content]  # â† å•é¡Œï¼šparams[:task][:content] ã§ã‚ã‚‹ã¹ã
  @task.save
  redirect_to('task/index')  # â† å•é¡Œï¼šé–“é•ã£ãŸãƒ‘ã‚¹
end

æ­£è§£ver
# Before (å•é¡Œã‚ã‚Š)
@task.content = params[:content]
redirect_to('task/index')

# After (æ­£ã—ã„)
@task.update(task_params)
redirect_to @task, notice: 'Task was successfully updated.'

2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ã®æ•´åˆæ€§å•é¡Œ
Taskãƒ†ãƒ¼ãƒ–ãƒ«ã«ã¯ title, content, deadline ã‚«ãƒ©ãƒ ãŒã‚ã‚‹
ã—ã‹ã— create ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ title ã®ã¿è¨­å®š
update ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ content ã®ã¿è¨­å®š

3. Strong ParametersãŒä½¿ã‚ã‚Œã¦ã„ãªã„
ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®å•é¡Œ
Rails ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã«åã—ã¦ã„ã‚‹
# Before (å±é™º)
@task = Task.new(title: params[:task][:title])

# After (å®‰å…¨)
@task = Task.new(task_params)

private
def task_params
  params.require(:task).permit(:title, :content, :deadline)
end

### **1. ERBè¨˜æ³•**
```erb
<%= %> = å®Ÿè¡Œã—ã¦è¡¨ç¤º
<% %> = å®Ÿè¡Œã™ã‚‹ã ã‘ï¼ˆè¡¨ç¤ºãªã—ï¼‰
<% = %> â† ã‚¹ãƒšãƒ¼ã‚¹å…¥ã‚Œã‚‹ã¨ã‚¨ãƒ©ãƒ¼ï¼
```

### **2. ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã®åŸºæœ¬ãƒ¡ã‚½ãƒƒãƒ‰**
```ruby
# ãƒ‡ãƒ¼ã‚¿å–å¾—
@tasks = Task.all.order(created_at: :desc)  # å…¨ä»¶ã‚’æ–°ã—ã„é †
@task = Task.find(params[:id])              # IDæŒ‡å®šã§1ä»¶

# showãƒ¡ã‚½ãƒƒãƒ‰ã®æ­£ã—ã„æ›¸ãæ–¹
def show
  @task = Task.find(params[:id])  # â† ã“ã‚Œ
end
# Task.find_by(id(:params[:id])) â† ã‚¨ãƒ©ãƒ¼
```

### **3. redirect_to**
```ruby
redirect_to = ãƒšãƒ¼ã‚¸ç§»å‹• + ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
redirect_to @task, notice: 'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸'
â†“
/tasks/ID ã«ç§»å‹•ã—ã¦ã€Œãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ã‚’1å›è¡¨ç¤º
```

### **4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç¢ºèªã‚³ãƒãƒ³ãƒ‰**
```bash
rails runner "puts Task.count"                    # ä»¶æ•°ç¢ºèª
rails runner "Task.all.each { |task| puts task.title }"  # ä¸€è¦§è¡¨ç¤º
```

### **5. ã‚µãƒ¼ãƒãƒ¼é–¢é€£**
```bash
rails server        # ã‚µãƒ¼ãƒãƒ¼èµ·å‹•
ps aux | grep rails  # ã‚µãƒ¼ãƒãƒ¼ç¢ºèª
Ctrl+C              # ã‚µãƒ¼ãƒãƒ¼åœæ­¢
```

### **6. ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã®ç¨®é¡**
```
Terminal: zsh   = ã‚³ãƒãƒ³ãƒ‰å…¥åŠ›ãƒ¢ãƒ¼ãƒ‰
Terminal: ruby  = Rubyãƒ—ãƒ­ã‚°ãƒ©ãƒ å®Ÿè¡Œä¸­ï¼ˆrails consoleã€rails serverãªã©ï¼‰
```

### **7. ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼è¡¨ç¤º**
```
ã‚·ãƒ³ãƒ—ãƒ«ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ = VS Codeå†…ã€ãƒªãƒ­ãƒ¼ãƒ‰å¿…è¦
å¤–éƒ¨ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ = ã‚ˆã‚Šé«˜æ©Ÿèƒ½ã€è‡ªå‹•æ›´æ–°
```


GitHub = ã‚³ãƒ¼ãƒ‰é–¢é€£ã®ãƒ¡ãƒ¢ï¼ˆREADMEã€ã‚³ãƒ¡ãƒ³ãƒˆã€ã‚³ãƒŸãƒƒãƒˆï¼‰
å­¦ç¿’ãƒ¡ãƒ¢ = åˆ¥ã®å ´æ‰€ï¼ˆNotionã€VS Codeã®notesãƒ•ã‚©ãƒ«ãƒ€ãªã©ï¼‰

README.md â†’ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆèª¬æ˜ãƒ»ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ–¹æ³•
ã‚³ãƒ¡ãƒ³ãƒˆ â†’ ã‚³ãƒ¼ãƒ‰å†…ã®èª¬æ˜ãƒ»TODO
ã‚³ãƒŸãƒƒãƒˆ â†’ å¤‰æ›´å†…å®¹ã®è¨˜éŒ²

index = ä¸€è¦§ãƒšãƒ¼ã‚¸ (/tasks)
show = è©³ç´°ãƒšãƒ¼ã‚¸ (/tasks/1) 
new = æ–°è¦ä½œæˆãƒšãƒ¼ã‚¸ (/tasks/new)
edit = ç·¨é›†ãƒšãƒ¼ã‚¸ (/tasks/1/edit)

è¦šãˆæ–¹: è‹±å˜èªã®æ„å‘³ + URLæ§‹é€ 
/tasks â†’ ä¸€è¦§
/tasks/ID â†’ è©³ç´°
/tasks/new â†’ æ–°è¦
/tasks/ID/edit â†’ ç·¨é›†


| **ã‚¢ã‚¯ã‚·ãƒ§ãƒ³** | **ãƒšãƒ¼ã‚¸ã®ç¨®é¡** | **URLä¾‹** | **ä½•ã‚’ã™ã‚‹ãƒšãƒ¼ã‚¸** |
|----------------|------------------|-----------|-------------------|
| `index` | **ä¸€è¦§ãƒšãƒ¼ã‚¸** | `/tasks` | å…¨ã‚¿ã‚¹ã‚¯ã‚’è¦‹ã‚‹ |
| `show` | **è©³ç´°ãƒšãƒ¼ã‚¸** | `/tasks/1` | 1ã¤ã®ã‚¿ã‚¹ã‚¯ã‚’è¦‹ã‚‹ |
| `new` | **æ–°è¦ä½œæˆãƒšãƒ¼ã‚¸** | `/tasks/new` | æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã‚’ä½œã‚‹ |
| `edit` | **ç·¨é›†ãƒšãƒ¼ã‚¸** | `/tasks/1/edit` | æ—¢å­˜ã‚¿ã‚¹ã‚¯ã‚’å¤‰æ›´ã™ã‚‹ |
| `create` | æ–°è¦ä¿å­˜å‡¦ç† | `POST /tasks` | newã®é€ä¿¡å…ˆ |
| `update` | æ›´æ–°å‡¦ç† | `PATCH /tasks/1` | editã®é€ä¿¡å…ˆ |
| `destroy` | å‰Šé™¤å‡¦ç† | `DELETE /tasks/1` | å‰Šé™¤ã®å®Ÿè¡Œ |


new = ãƒ•ã‚©ãƒ¼ãƒ è¡¨ç¤ºã ã‘ï¼ˆredirectä¸è¦ï¼‰
create = ä¿å­˜ + redirect

def new
  @task = Task.new  # ãƒ•ã‚©ãƒ¼ãƒ ç”¨ã®ç©ºã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
end

ãƒ•ã‚©ãƒ¼ãƒ ã®åŸºæœ¬æ§‹é€ :
<%= form_tag("/tasks", method: :post) do %>
  <input name="task[title]">
  <textarea name="task[content]"></textarea>
  <input type="submit" value="é€ä¿¡">
<% end %>

ãƒã‚¤ãƒ³ãƒˆ: submitãƒœã‚¿ãƒ³ã¯formå†…ã€name="task[é …ç›®å]"


label = å…¥åŠ›æ¬„ã®èª¬æ˜æ–‡ï¼ˆã€Œã‚¿ã‚¤ãƒˆãƒ«:ã€ãªã©ï¼‰
<label for="title">ã‚¿ã‚¤ãƒˆãƒ«:</label>
<input id="title" name="task[title]">

ã‚¯ãƒ©ã‚¹ = CSSã§ãƒ‡ã‚¶ã‚¤ãƒ³ã™ã‚‹ãŸã‚ã®ç›®å°
class="form-input" â†’ å…¥åŠ›æ¬„ã®ã‚¹ã‚¿ã‚¤ãƒ«
class="btn btn-primary" â†’ ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ«

Railsæ¨™æº–ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆ = 2ã‚¹ãƒšãƒ¼ã‚¹

<div>
  <p>å†…å®¹</p>        â† 2ã‚¹ãƒšãƒ¼ã‚¹
    <span>æ·±ã„</span>  â† 4ã‚¹ãƒšãƒ¼ã‚¹
</div>

VS Code: Shift+Alt+F ã§è‡ªå‹•æ•´å½¢
å³ä¸‹ã§ã€ŒSpaces: 2ã€ç¢ºèª


required = å¿…é ˆé …ç›®ï¼ˆç©ºã§é€ä¿¡ã§ããªã„ï¼‰
<input type="text" required>

btn-primary = é’è‰²ï¼ˆãƒ¡ã‚¤ãƒ³æ“ä½œï¼šä¿å­˜ãƒ»ä½œæˆï¼‰
btn-secondary = ã‚°ãƒ¬ãƒ¼ï¼ˆã‚µãƒ–æ“ä½œï¼šã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒ»æˆ»ã‚‹ï¼‰
btn-danger = èµ¤è‰²ï¼ˆå±é™ºæ“ä½œï¼šå‰Šé™¤ï¼‰

ä½¿ã„åˆ†ã‘: ãƒ¡ã‚¤ãƒ³æ“ä½œ = primaryã€ãã®ä»– = secondary


ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ = å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã®ãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½
ãƒ¢ãƒ‡ãƒ«ã§å®šç¾©:
validates :title, presence: true      # å¿…é ˆ
validates :title, length: { maximum: 100 }  # é•·ã•åˆ¶é™

æµã‚Œ:
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼é€ä¿¡ â†’ 2. ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ â†’ 3. ã‚¨ãƒ©ãƒ¼ãªã‚‰ç”»é¢ã«æˆ»ã™
4. OKãªã‚‰ä¿å­˜

å®Ÿè£…å ´æ‰€: app/models/task.rb



ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é…ç½®å ´æ‰€:
form_tag ç›´å¾Œï¼ˆãƒ•ã‚©ãƒ¼ãƒ ã®ä¸€ç•ªä¸Šï¼‰

<%= form_tag(...) do %>
  <!-- ã“ã“ã«ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¿½åŠ  -->
  <div class="form-group">

ç†ç”±: æœ€åˆã«ç›®ã«å…¥ã‚‹ã€Railsæ¨™æº–ãƒ‘ã‚¿ãƒ¼ãƒ³



ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºã®æ­£ã—ã„æ›¸ãæ–¹:
@task.errors.any?           # è¤‡æ•°å½¢
@task.errors.count          # è¤‡æ•°å½¢  
@task.errors.full_messages  # è¤‡æ•°å½¢

HTMLã‚¿ã‚°ã‚‚æ­£ç¢ºã«: <h3></h3>




any? = ã€Œ1ã¤ã§ã‚‚ã‚ã‚‹ï¼Ÿã€ã‚’ãƒã‚§ãƒƒã‚¯

@task.errors.any?
â†“
ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚‹ â†’ true â†’ ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
ã‚¨ãƒ©ãƒ¼ãªã— â†’ false â†’ ä½•ã‚‚è¡¨ç¤ºã—ãªã„

æ¡ä»¶åˆ†å²ã§å¿…é ˆ: if @task.errors.any?




æ—¥ä»˜ã®å†è¡¨ç¤º:
value="<%= @task.deadline&.strftime('%Y-%m-%d') %>"

&. = nilãƒã‚§ãƒƒã‚¯ï¼ˆnilãªã‚‰ä½•ã‚‚ã—ãªã„ï¼‰
strftime('%Y-%m-%d') = HTMLç”¨ã®æ—¥ä»˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ




ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å¤‰æ›´:
ãƒ¢ãƒ‡ãƒ«ã§ message: ã‚ªãƒ—ã‚·ãƒ§ãƒ³æŒ‡å®š

validates :title, presence: { message: "ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„" }

è¡¨ç¤ºä¾‹: "Titleã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
å®Œå…¨æ—¥æœ¬èªåŒ–: config/locales/ja.yml ã§å±æ€§åã‚‚å¤‰æ›´



@taskã®å­˜åœ¨ãƒã‚§ãƒƒã‚¯è¿½åŠ :
<% if @task && @task.errors.any? %>

ç†ç”±: åˆå›ã‚¢ã‚¯ã‚»ã‚¹æ™‚@taskãŒnilã§ã‚¨ãƒ©ãƒ¼
&& = ã©ã¡ã‚‰ã‚‚trueã®æ™‚ã ã‘å®Ÿè¡Œ

ãƒ‘ã‚¿ãƒ¼ãƒ³: @taskå­˜åœ¨ç¢ºèª â†’ ã‚¨ãƒ©ãƒ¼ç¢ºèª â†’ è¡¨ç¤º



<!-- å±é™º -->
<% if @task && @task.errors.any? %>

<!-- å®‰å…¨ -->
<% if defined?(@task) && @task&.errors&.any? %>



user.name   # nilã§ã‚¨ãƒ©ãƒ¼
user&.name  # nilã§å®‰å…¨ã«nilã‚’è¿”ã™


.form-input {
  border-radius: 6px;  /* ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›æ¬„ã®è§’ã‚’ä¸¸ã */
}

.btn {
  border-radius: 6px;  /* ãƒœã‚¿ãƒ³ã®è§’ã‚’ä¸¸ã */
}

å­˜åœ¨ã—ãªã„IDã¸ã®ã‚¢ã‚¯ã‚»ã‚¹å¯¾å¿œæ©Ÿèƒ½ï¼ˆã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è¡¨ç¤ºï¼‰
application_controller.rbã«ä¾‹å¤–ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°è¿½åŠ 

tasks_controller.rbã®å„ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã«rescueæ–‡è¿½åŠ 

app/views/errors/not_found.html.erbä½œæˆ

application.cssã«ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ç”¨CSSè¿½åŠ 

å­˜åœ¨ã—ãªã„IDã§ãƒ†ã‚¹ãƒˆï¼ˆ/tasks/99999ï¼‰


